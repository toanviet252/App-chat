"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[906],{906:function(e,r,s){s.r(r),s.d(r,{default:function(){return F}});var a=s(4165),t=s(5861),n=s(9439),i=s(1095),o=s(3118),c=s(940),l=s(9072),u=s(4203),m=s(3707),d=s(7083),p=s(2351),h=s(7106),f=s(9529),x=s(292),b=s(9214),Z=s(8999),g=s(3956),j=s(7689),w=s(3298),v=s(6905),y=s(2791),N=s(4453),P=s(9062),k=s(184),F=function(){var e=(0,y.useState)(!1),r=(0,n.Z)(e,2),s=r[0],F=r[1],Y=(0,j.s0)(),E=i.Z.useForm(),I=(0,n.Z)(E,1)[0],U=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){var s,n,i,c,l,u,m,d,p,h;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.email,n=r.password,i=r.dateBirth,c=r.phoneNumber,l=r.displayName,u=r.uploadFile,m=i.format("DD/MM/YYYY"),e.prev=2,F(!0),e.next=6,(0,w.o8)(s,n);case 6:return d=e.sent,p=d.user,h=(0,N.iH)(w.tO,"".concat(l,"_").concat(u[0].name)),e.next=11,(0,N.B0)(h,u[0].originFileObj).then((function(){(0,N.Jt)(h).then(function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.ck)(p,{displayName:l,photoURL:r});case 3:return e.next=5,(0,w.o6)(p,{dateOfBirth:m,phoneNumber:c,uid:p.uid});case 5:return e.next=7,(0,P.pl)((0,P.JU)(w.db,"userChats",p.uid),{});case 7:return e.next=9,o.ZP.success("Register account successed");case 9:F(!1),Y("/"),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("err when create users",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}())}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),"auth/email-already-in-use"===e.t0.code?o.ZP.warning("Email has already in used. Please choose another email!"):console.log("Error from create user >>>>",e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(r){return e.apply(this,arguments)}}();return(0,k.jsxs)("div",{className:"register-form-container",children:[(0,k.jsx)("h1",{children:"Register account"}),(0,k.jsxs)(i.Z,{layout:"vertical",className:"form-control register-form",form:I,onFinish:function(){I.validateFields().then((function(e){U(e)}))},size:"medium",children:[(0,k.jsx)(i.Z.Item,{label:"Username",name:"displayName",className:"register-items",rules:[{required:!0,message:"Username can not be empty! "},{min:6,message:"Must be more than 6 characters"},{max:15,message:"Name is too long!"},{whitespace:!0,message:"Invalid username"}],hasFeedback:!0,children:(0,k.jsx)(c.Z,{prefix:(0,k.jsx)(f.Z,{}),placeholder:"Your username"})}),(0,k.jsx)(i.Z.Item,{className:"register-items",label:"Date of birth",name:"dateBirth",rules:[{required:!0,message:"Date of birth can not be empty!"}],children:(0,k.jsx)(l.Z,{placeholder:"Your birthday",style:{width:"100%"}})}),(0,k.jsx)(i.Z.Item,{label:"Phone number",name:"phoneNumber",className:"register-items",rules:[{required:!0,message:"Phone number can not be empty"}],hasFeedback:!0,children:(0,k.jsx)(c.Z,{prefix:(0,k.jsx)(x.Z,{}),type:"number",placeholder:"Your phone number"})}),(0,k.jsx)(i.Z.Item,{className:"register-items",label:"Email",name:"email",rules:[{required:!0,message:"Email can not be empty!"},{type:"email",message:"Email is invalid!"}],hasFeedback:!0,children:(0,k.jsx)(c.Z,{prefix:(0,k.jsx)(b.Z,{}),placeholder:"Your email "})}),(0,k.jsx)(i.Z.Item,{className:"register-items",label:"Password",name:"password",rules:[{required:!0,message:"Password can not be empty!"},{validator:function(e,r){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(r)?Promise.resolve():Promise.reject(new Error("Password must be include 8 characters, at least 1 uppercase, 1 lowercase, 1 number and 1 special character!"))}}],hasFeedback:!0,children:(0,k.jsx)(c.Z.Password,{prefix:(0,k.jsx)(Z.Z,{}),placeholder:"Your password"})}),(0,k.jsx)(i.Z.Item,{className:"register-items",label:"Confirm Password",name:"confirm-password",dependencies:["password"],rules:[function(e){var r=e.getFieldValue;return{validator:function(e,s){return s&&r("password")!==s?Promise.reject(new Error("The password does not match!")):Promise.resolve()}}},{required:!0,message:"Confirm your password!"}],hasFeedback:!0,children:(0,k.jsx)(c.Z.Password,{prefix:(0,k.jsx)(g.Z,{}),placeholder:"Confirm your password"})}),(0,k.jsx)(i.Z.Item,{className:"register-items",label:"Upload avatar",name:"uploadFile",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList},children:(0,k.jsx)(u.Z,{className:"upload-img",beforeUpload:function(){return!1},children:(0,k.jsx)(m.Z,{icon:(0,k.jsx)(p.Z,{}),children:"Select File"})})}),(0,k.jsxs)("button",{type:"submit",className:"login-btn",children:[s&&(0,k.jsx)(d.Z,{indicator:(0,k.jsx)(h.Z,{}),style:{marginRight:"5px"}}),"SignUp"]})]})]})}}}]);
//# sourceMappingURL=906.804c3244.chunk.js.map