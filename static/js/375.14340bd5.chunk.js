"use strict";(self.webpackChunkchat_app=self.webpackChunkchat_app||[]).push([[375],{375:function(e,t,n){n.r(t),n.d(t,{default:function(){return ze}});var r=n(2791),a=n(284).Z,s=n(9752).Z,c=n(9439),o=n(4165),i=n(5861),l=n(4942),u=n(1002),d=n(7462),f=n(1694),m=n.n(f),v=n(5207),h=n(1929),p=n(1113),x=n(4466);function g(e){return-1!==x.Y.indexOf(e)}function y(e){var t,n=e.prefixCls,a=e.value,s=e.current,c=e.offset,o=void 0===c?0:c;return o&&(t={position:"absolute",top:"".concat(o,"00%"),left:0}),r.createElement("span",{style:t,className:m()("".concat(n,"-only-unit"),{current:s})},a)}function N(e,t,n){for(var r=e,a=0;(r+10)%10!==t;)r+=n,a+=n;return a}function b(e){var t,n,a=e.prefixCls,s=e.count,o=e.value,i=Number(o),l=Math.abs(s),u=r.useState(i),f=(0,c.Z)(u,2),m=f[0],v=f[1],h=r.useState(l),p=(0,c.Z)(h,2),x=p[0],g=p[1],b=function(){v(i),g(l)};if(r.useEffect((function(){var e=setTimeout((function(){b()}),1e3);return function(){clearTimeout(e)}}),[i]),m===i||Number.isNaN(i)||Number.isNaN(m))t=[r.createElement(y,(0,d.Z)({},e,{key:i,current:!0}))],n={transition:"none"};else{t=[];for(var j=i+10,Z=[],C=i;C<=j;C+=1)Z.push(C);var E=Z.findIndex((function(e){return e%10===m}));t=Z.map((function(t,n){var a=t%10;return r.createElement(y,(0,d.Z)({},e,{key:t,value:a,offset:n-E,current:n===E}))})),n={transform:"translateY(".concat(-N(m,i,x<l?1:-1),"00%)")}}return r.createElement("span",{className:"".concat(a,"-only"),style:n,onTransitionEnd:b},t)}var j=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Z=function(e){var t=e.prefixCls,n=e.count,a=e.className,s=e.motionClassName,c=e.style,o=e.title,i=e.show,l=e.component,u=void 0===l?"sup":l,f=e.children,v=j(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),x=(0,r.useContext(h.E_).getPrefixCls)("scroll-number",t),g=(0,d.Z)((0,d.Z)({},v),{"data-show":i,style:c,className:m()(x,a,s),title:o}),y=n;if(n&&Number(n)%1===0){var N=String(n).split("");y=N.map((function(e,t){return r.createElement(b,{prefixCls:x,count:Number(n),value:e,key:N.length-t})}))}return c&&c.borderColor&&(g.style=(0,d.Z)((0,d.Z)({},c),{boxShadow:"0 0 0 1px ".concat(c.borderColor," inset")})),f?(0,p.Tm)(f,(function(e){return{className:m()("".concat(x,"-custom-component"),null===e||void 0===e?void 0:e.className,s)}})):r.createElement(u,g,y)},C=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},E=function(e){var t,n,a=e.prefixCls,s=e.scrollNumberPrefixCls,c=e.children,o=e.status,i=e.text,f=e.color,x=e.count,y=void 0===x?null:x,N=e.overflowCount,b=void 0===N?99:N,j=e.dot,E=void 0!==j&&j,w=e.size,O=void 0===w?"default":w,k=e.title,U=e.offset,S=e.style,R=e.className,I=e.showZero,z=void 0!==I&&I,P=C(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),L=r.useContext(h.E_),M=L.getPrefixCls,D=L.direction,H=M("badge",a),A=y>b?"".concat(b,"+"):y,V=null!==o&&void 0!==o||null!==f&&void 0!==f,_="0"===A||0===A,T=E&&!_,F=T?"":A,J=(0,r.useMemo)((function(){return(null===F||void 0===F||""===F||_&&!z)&&!T}),[F,_,z,T]),B=(0,r.useRef)(y);J||(B.current=y);var Q=B.current,W=(0,r.useRef)(F);J||(W.current=F);var K=W.current,q=(0,r.useRef)(T);J||(q.current=T);var Y=(0,r.useMemo)((function(){if(!U)return(0,d.Z)({},S);var e={marginTop:U[1]};return"rtl"===D?e.left=parseInt(U[0],10):e.right=-parseInt(U[0],10),(0,d.Z)((0,d.Z)({},e),S)}),[D,U,S]),G=null!==k&&void 0!==k?k:"string"===typeof Q||"number"===typeof Q?Q:void 0,X=J||!i?null:r.createElement("span",{className:"".concat(H,"-status-text")},i),$=Q&&"object"===(0,u.Z)(Q)?(0,p.Tm)(Q,(function(e){return{style:(0,d.Z)((0,d.Z)({},Y),e.style)}})):void 0,ee=m()((t={},(0,l.Z)(t,"".concat(H,"-status-dot"),V),(0,l.Z)(t,"".concat(H,"-status-").concat(o),!!o),(0,l.Z)(t,"".concat(H,"-status-").concat(f),g(f)),t)),te={};f&&!g(f)&&(te.background=f);var ne=m()(H,(n={},(0,l.Z)(n,"".concat(H,"-status"),V),(0,l.Z)(n,"".concat(H,"-not-a-wrapper"),!c),(0,l.Z)(n,"".concat(H,"-rtl"),"rtl"===D),n),R);if(!c&&V){var re=Y.color;return r.createElement("span",(0,d.Z)({},P,{className:ne,style:Y}),r.createElement("span",{className:ee,style:te}),i&&r.createElement("span",{style:{color:re},className:"".concat(H,"-status-text")},i))}return r.createElement("span",(0,d.Z)({},P,{className:ne}),c,r.createElement(v.Z,{visible:!J,motionName:"".concat(H,"-zoom"),motionAppear:!1,motionDeadline:1e3},(function(e){var t,n=e.className,a=M("scroll-number",s),c=q.current,i=m()((t={},(0,l.Z)(t,"".concat(H,"-dot"),c),(0,l.Z)(t,"".concat(H,"-count"),!c),(0,l.Z)(t,"".concat(H,"-count-sm"),"small"===O),(0,l.Z)(t,"".concat(H,"-multiple-words"),!c&&K&&K.toString().length>1),(0,l.Z)(t,"".concat(H,"-status-").concat(o),!!o),(0,l.Z)(t,"".concat(H,"-status-").concat(f),g(f)),t)),u=(0,d.Z)({},Y);return f&&!g(f)&&((u=u||{}).background=f),r.createElement(Z,{prefixCls:a,show:!J,motionClassName:n,className:i,count:K,title:G,style:u,key:"scrollNumber"},$)})),X)};E.Ribbon=function(e){var t,n=e.className,a=e.prefixCls,s=e.style,c=e.color,o=e.children,i=e.text,u=e.placement,f=void 0===u?"end":u,v=r.useContext(h.E_),p=v.getPrefixCls,x=v.direction,y=p("ribbon",a),N=g(c),b=m()(y,"".concat(y,"-placement-").concat(f),(t={},(0,l.Z)(t,"".concat(y,"-rtl"),"rtl"===x),(0,l.Z)(t,"".concat(y,"-color-").concat(c),N),t),n),j={},Z={};return c&&!N&&(j.background=c,Z.color=c),r.createElement("div",{className:"".concat(y,"-wrapper")},o,r.createElement("div",{className:b,style:(0,d.Z)((0,d.Z)({},j),s)},r.createElement("span",{className:"".concat(y,"-text")},i),r.createElement("div",{className:"".concat(y,"-corner"),style:Z})))};var w=E,O=n(8829),k=n(8834),U=n(9581),S=n(8295);var R=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=(0,r.useRef)({}),n=(0,U.Z)();return(0,r.useEffect)((function(){var r=S.ZP.subscribe((function(r){t.current=r,e&&n()}));return function(){return S.ZP.unsubscribe(r)}}),[]),t.current},I=r.createContext("default"),z=function(e){var t=e.children,n=e.size;return r.createElement(I.Consumer,null,(function(e){return r.createElement(I.Provider,{value:n||e},t)}))},P=I,L=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},M=function(e,t){var n,a,s=r.useContext(P),o=r.useState(1),i=(0,c.Z)(o,2),f=i[0],v=i[1],p=r.useState(!1),x=(0,c.Z)(p,2),g=x[0],y=x[1],N=r.useState(!0),b=(0,c.Z)(N,2),j=b[0],Z=b[1],C=r.useRef(null),E=r.useRef(null),w=(0,k.sQ)(t,C),U=r.useContext(h.E_).getPrefixCls,I=function(){if(E.current&&C.current){var t=E.current.offsetWidth,n=C.current.offsetWidth;if(0!==t&&0!==n){var r=e.gap,a=void 0===r?4:r;2*a<n&&v(n-2*a<t?(n-2*a)/t:1)}}};r.useEffect((function(){y(!0)}),[]),r.useEffect((function(){Z(!0),v(1)}),[e.src]),r.useEffect((function(){I()}),[e.gap]);var z,M=e.prefixCls,D=e.shape,H=void 0===D?"circle":D,A=e.size,V=void 0===A?"default":A,_=e.src,T=e.srcSet,F=e.icon,J=e.className,B=e.alt,Q=e.draggable,W=e.children,K=e.crossOrigin,q=L(e,["prefixCls","shape","size","src","srcSet","icon","className","alt","draggable","children","crossOrigin"]),Y="default"===V?s:V,G=Object.keys("object"===(0,u.Z)(Y)&&Y||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),X=R(G),$=r.useMemo((function(){if("object"!==(0,u.Z)(Y))return{};var e=S.c4.find((function(e){return X[e]})),t=Y[e];return t?{width:t,height:t,lineHeight:"".concat(t,"px"),fontSize:F?t/2:18}:{}}),[X,Y]),ee=U("avatar",M),te=m()((n={},(0,l.Z)(n,"".concat(ee,"-lg"),"large"===Y),(0,l.Z)(n,"".concat(ee,"-sm"),"small"===Y),n)),ne=r.isValidElement(_),re=m()(ee,te,(a={},(0,l.Z)(a,"".concat(ee,"-").concat(H),!!H),(0,l.Z)(a,"".concat(ee,"-image"),ne||_&&j),(0,l.Z)(a,"".concat(ee,"-icon"),!!F),a),J),ae="number"===typeof Y?{width:Y,height:Y,lineHeight:"".concat(Y,"px"),fontSize:F?Y/2:18}:{};if("string"===typeof _&&j)z=r.createElement("img",{src:_,draggable:Q,srcSet:T,onError:function(){var t=e.onError;!1!==(t?t():void 0)&&Z(!1)},alt:B,crossOrigin:K});else if(ne)z=_;else if(F)z=F;else if(g||1!==f){var se="scale(".concat(f,") translateX(-50%)"),ce={msTransform:se,WebkitTransform:se,transform:se},oe="number"===typeof Y?{lineHeight:"".concat(Y,"px")}:{};z=r.createElement(O.Z,{onResize:I},r.createElement("span",{className:"".concat(ee,"-string"),ref:E,style:(0,d.Z)((0,d.Z)({},oe),ce)},W))}else z=r.createElement("span",{className:"".concat(ee,"-string"),style:{opacity:0},ref:E},W);return delete q.onError,delete q.gap,r.createElement("span",(0,d.Z)({},q,{style:(0,d.Z)((0,d.Z)((0,d.Z)({},ae),$),q.style),className:re,ref:w}),z)};var D=r.forwardRef(M),H=n(5501),A=n(2419),V=function(e){return e?"function"===typeof e?e():e:null},_=n(9464),T=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},F=function(e){var t=e.title,n=e.content,a=e.prefixCls;return t||n?r.createElement(r.Fragment,null,t&&r.createElement("div",{className:"".concat(a,"-title")},V(t)),r.createElement("div",{className:"".concat(a,"-inner-content")},V(n))):null};var J=r.forwardRef((function(e,t){var n=e.prefixCls,a=e.title,s=e.content,c=e._overlay,o=e.placement,i=void 0===o?"top":o,l=e.trigger,u=void 0===l?"hover":l,f=e.mouseEnterDelay,m=void 0===f?.1:f,v=e.mouseLeaveDelay,p=void 0===v?.1:v,x=e.overlayStyle,g=void 0===x?{}:x,y=T(e,["prefixCls","title","content","_overlay","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),N=r.useContext(h.E_).getPrefixCls,b=N("popover",n),j=N();return r.createElement(A.Z,(0,d.Z)({placement:i,trigger:u,mouseEnterDelay:m,mouseLeaveDelay:p,overlayStyle:g},y,{prefixCls:b,ref:t,overlay:c||r.createElement(F,{prefixCls:b,title:a,content:s}),transitionName:(0,_.mL)(j,"zoom-big",y.transitionName)}))})),B=function(e){var t=r.useContext(h.E_),n=t.getPrefixCls,a=t.direction,s=e.prefixCls,c=e.className,o=void 0===c?"":c,i=e.maxCount,u=e.maxStyle,d=e.size,f=n("avatar-group",s),v=m()(f,(0,l.Z)({},"".concat(f,"-rtl"),"rtl"===a),o),x=e.children,g=e.maxPopoverPlacement,y=void 0===g?"top":g,N=e.maxPopoverTrigger,b=void 0===N?"hover":N,j=(0,H.Z)(x).map((function(e,t){return(0,p.Tm)(e,{key:"avatar-key-".concat(t)})})),Z=j.length;if(i&&i<Z){var C=j.slice(0,i),E=j.slice(i,Z);return C.push(r.createElement(J,{key:"avatar-popover-key",content:E,trigger:b,placement:y,overlayClassName:"".concat(f,"-popover")},r.createElement(D,{style:u},"+".concat(Z-i)))),r.createElement(z,{size:d},r.createElement("div",{className:v,style:e.style},C))}return r.createElement(z,{size:d},r.createElement("div",{className:v,style:e.style},j))},Q=D;Q.Group=B;var W=Q,K=n(940),q=n(9529),Y=n(1413),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"},X=n(4291),$=function(e,t){return r.createElement(X.Z,(0,Y.Z)((0,Y.Z)({},e),{},{ref:t,icon:G}))};$.displayName="MenuOutlined";var ee=r.forwardRef($),te=n(9434),ne=n(8292),re=n(9062),ae=n(3298),se=n(184),ce=function(){var e=(0,te.v9)((function(e){return e.Auth.currentUser})),t=(0,te.v9)((function(e){return e.Auth.curentUserPhoto})),n=(0,te.I0)(),a=(0,te.v9)((function(e){return e.Auth.nameFind})),s=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,re.hJ)(ae.db,"users"),r=(0,re.IO)(t,(0,re.ar)("displayName","==",a)),e.prev=2,e.next=5,(0,re.PL)(r);case 5:e.sent.forEach((function(e){var t;t=e.data(),n(ne._v.setQueryUser(t))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),alert(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),l=(0,r.useState)(!1),u=(0,c.Z)(l,2),d=u[0],f=u[1];return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)("div",{className:"head-container",children:[(0,se.jsxs)("div",{className:"current-user-container",children:[(0,se.jsx)("div",{className:"avatar-container",children:(0,se.jsx)(w,{dot:!0,color:"green",children:(0,se.jsx)(W,{className:"current-user-avatar",src:t,icon:(0,se.jsx)(q.Z,{})})})}),(0,se.jsxs)("div",{className:"user-detail",children:[(0,se.jsx)("h4",{children:e&&e.displayName}),(0,se.jsx)("p",{children:"Status: "})]})]}),(0,se.jsxs)("div",{className:"hidden-nav",children:[(0,se.jsx)("button",{className:"icon-btn",onClick:function(){return f(!d)},children:(0,se.jsx)(ee,{})}),d&&(0,se.jsxs)("ul",{className:"nav-list",children:[(0,se.jsx)("li",{className:"list-item",children:"Setting"}),(0,se.jsx)("li",{className:"list-item",children:"Help and feedback"}),(0,se.jsx)("li",{className:"list-item",children:"Keyboard Shortcuts"}),(0,se.jsx)("li",{className:"list-item",children:(0,se.jsx)("button",{className:"btn-logOut",onClick:function(){n(ne.g4.logOut()),n(ne.g4.setCurrentUser(null))},children:"Sign Out"})})]})]})]}),(0,se.jsx)("div",{className:"input-feild",children:(0,se.jsx)(K.Z.Search,{placeholder:"find people",value:a,onKeyDown:function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||s()},onChange:function(e){n(ne.g4.setNameFind(e.target.value))}})})]})},oe=function(){return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)("div",{className:"user-kit-container",children:(0,se.jsxs)("ul",{className:"user-kit-list",children:[(0,se.jsxs)("li",{className:"kit-items",children:[(0,se.jsx)("div",{className:"kit-icon",children:(0,se.jsx)("i",{className:"fa fa-lg fa-comments","aria-hidden":"true"})}),(0,se.jsx)("p",{children:"Chats"})]}),(0,se.jsxs)("li",{className:"kit-items",children:[(0,se.jsx)("div",{className:"kit-icon",children:(0,se.jsx)("i",{className:"fa fa-lg fa-phone-square","aria-hidden":"true"})}),(0,se.jsx)("p",{children:"Calls"})]}),(0,se.jsxs)("li",{className:"kit-items",children:[(0,se.jsx)("div",{className:"kit-icon",children:(0,se.jsx)("i",{className:"fa fa-lg fa-address-book","aria-hidden":"true"})}),(0,se.jsx)("p",{children:"Contact"})]}),(0,se.jsxs)("li",{className:"kit-items",children:[(0,se.jsx)("div",{className:"kit-icon",children:(0,se.jsx)("i",{className:"fa fa-lg fa-bell","aria-hidden":"true"})}),(0,se.jsx)("p",{children:"Notifications"})]})]})}),(0,se.jsxs)("div",{className:"meet-chat-container",children:[(0,se.jsxs)("button",{className:"meet-chat-btn",children:[(0,se.jsx)("i",{className:"fa fa-video-camera","aria-hidden":"true"})," Meet now"]}),(0,se.jsxs)("button",{className:"meet-chat-btn",children:[(0,se.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})," New Chat"]})]})]})},ie=function(){var e=(0,te.v9)((function(e){return e.Auth.currentUser})),t=(0,te.I0)(),n=function(e){t(ne.g4.setChooseContactUser(e))},a=function(e){t(ne._v.setChatId(e))},s=(0,te.v9)((function(e){return e.QueryReducer.queryUser})),u=function(){t(ne.g4.setIsChooseContact())},d=(0,r.useState)([]),f=(0,c.Z)(d,2),m=f[0],v=f[1];(0,r.useEffect)((function(){(null===e||void 0===e?void 0:e.uid)&&function(){var t=(0,re.cf)((0,re.JU)(ae.db,"userChats",null===e||void 0===e?void 0:e.uid),(function(e){var t=Object.entries(e.data());v(t)}))}()}),[null===e||void 0===e?void 0:e.uid]);var h=function(){var r=(0,i.Z)((0,o.Z)().mark((function r(){var c,i,d;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=e.uid>s.uid?e.uid+s.uid:s.uid+e.uid,a(c),r.prev=2,r.next=5,(0,re.QT)((0,re.JU)(ae.db,"chats",c));case 5:if(r.sent.exists()){r.next=13;break}return r.next=9,(0,re.pl)((0,re.JU)(ae.db,"chats",c),{messages:[]});case 9:return r.next=11,(0,re.r7)((0,re.JU)(ae.db,"userChats",e.uid),(i={},(0,l.Z)(i,c+".userInfo",{uid:s.uid,displayName:s.displayName,photoURL:s.photoURL}),(0,l.Z)(i,c+".date",(0,re.Bt)()),i));case 11:return r.next=13,(0,re.r7)((0,re.JU)(ae.db,"userChats",s.uid),(d={},(0,l.Z)(d,c+".userInfo",{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL}),(0,l.Z)(d,c+".date",(0,re.Bt)()),d));case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(2),console.error(r.t0);case 18:f="",t(ne.g4.setNameFind(f)),n(s),u(),o="",t(ne._v.setQueryUser(o));case 22:case"end":return r.stop()}var o,f}),r,null,[[2,15]])})));return function(){return r.apply(this,arguments)}}(),p=(0,r.useCallback)((function(t){var r=e.uid>t.uid?e.uid+t.uid:t.uid+e.uid;a(r),n(t),u()}),[e.uid]),x=null===m||void 0===m?void 0:m.sort((function(e,t){return t[1].date-e[1].date})).map((function(e){var t,n;return(0,se.jsxs)("div",{className:"contact-container",children:[(0,se.jsx)(W,{src:e[1].userInfo.photoURL,className:"avatar-contact"}),(0,se.jsxs)("div",{className:"contact-detail",onClick:function(){return p(e[1].userInfo)},children:[(0,se.jsx)("h3",{children:e[1].userInfo.displayName}),(0,se.jsx)("p",{children:(null===(t=e[1].lastestMessage)||void 0===t?void 0:t.text.length)>0?null===(n=e[1].lastestMessage)||void 0===n?void 0:n.text:"image"})]})]},e[1].userInfo.uid)}));return(0,se.jsxs)("div",{className:"contact-user-container",children:[s&&(0,se.jsxs)("div",{className:"contact-container",children:[(0,se.jsx)(W,{src:s.photoURL,className:"avatar-contact"}),(0,se.jsx)("div",{className:"contact-detail",onClick:h,children:(0,se.jsx)("h3",{children:s.displayName})})]}),(0,se.jsx)("div",{children:x})]})},le=function(e){var t=e.messages,n=(0,te.v9)((function(e){return e.Auth.currentUser})),a=(0,te.v9)((function(e){return e.Auth.chooseContactUser})),s=(0,r.useRef)();(0,r.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[t]);var c=function(e){return("0"+e).slice(-2)},o=function(e){var t=new Date(1e3*e),n=t.getHours(),r=t.getMinutes();return c(t.getDay())+"/"+c(t.getMonth())+"/"+c(t.getUTCFullYear())+" at "+c(n)+":"+c(r)};return(0,se.jsx)(se.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e){return(0,se.jsxs)("div",{className:"message-feild ".concat((null===e||void 0===e?void 0:e.senderId)===(null===n||void 0===n?void 0:n.uid)?"owner":""),ref:s,children:[(0,se.jsxs)("div",{className:"message-infor",children:[(0,se.jsx)(W,{src:e.senderId===(null===n||void 0===n?void 0:n.uid)?null===n||void 0===n?void 0:n.photoURL:null===a||void 0===a?void 0:a.photoURL,className:"avatar-mesg"}),(0,se.jsx)("span",{children:(0,se.jsx)("em",{children:o(e.date.seconds)})})]}),(0,se.jsxs)("div",{className:"message-content",children:[e.text.length>0?(0,se.jsx)("p",{className:"message-text",children:e.text}):"",e.img&&(0,se.jsx)("img",{className:"message-img",src:e.img,alt:"send-img"})]})]},e.id)}))})},ue=function(){var e=(0,r.useState)([]),t=(0,c.Z)(e,2),n=t[0],a=t[1],s=(0,te.v9)((function(e){return e.QueryReducer.chatId}));return(0,r.useEffect)((function(){s&&function(){var e=(0,re.cf)((0,re.JU)(ae.db,"chats",s),(function(e){var t;e.exists()&&a(null===(t=e.data())||void 0===t?void 0:t.messages)}))}()}),[s]),(0,se.jsx)("div",{className:"messages-body",children:(0,se.jsx)(le,{messages:n})})},de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0zm494.6-153.4L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file-image",theme:"outlined"},fe=function(e,t){return r.createElement(X.Z,(0,Y.Z)((0,Y.Z)({},e),{},{ref:t,icon:de}))};fe.displayName="FileImageOutlined";var me=r.forwardRef(fe),ve={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},he=function(e,t){return r.createElement(X.Z,(0,Y.Z)((0,Y.Z)({},e),{},{ref:t,icon:ve}))};he.displayName="SendOutlined";var pe,xe=r.forwardRef(he),ge=n(4453),ye={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},Ne=new Uint8Array(16);function be(){if(!pe&&!(pe="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pe(Ne)}for(var je=[],Ze=0;Ze<256;++Ze)je.push((Ze+256).toString(16).slice(1));function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(je[e[t+0]]+je[e[t+1]]+je[e[t+2]]+je[e[t+3]]+"-"+je[e[t+4]]+je[e[t+5]]+"-"+je[e[t+6]]+je[e[t+7]]+"-"+je[e[t+8]]+je[e[t+9]]+"-"+je[e[t+10]]+je[e[t+11]]+je[e[t+12]]+je[e[t+13]]+je[e[t+14]]+je[e[t+15]]).toLowerCase()}var Ee=function(e,t,n){if(ye.randomUUID&&!t&&!e)return ye.randomUUID();var r=(e=e||{}).random||(e.rng||be)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return Ce(r)},we=function(){var e=(0,r.useState)(""),t=(0,c.Z)(e,2),n=t[0],a=t[1],s=(0,r.useState)(null),u=(0,c.Z)(s,2),d=u[0],f=u[1],m=(0,te.v9)((function(e){return e.Auth.currentUser})),v=(0,te.v9)((function(e){return e.QueryReducer.chatId})),h=(0,te.v9)((function(e){return e.Auth.chooseContactUser})),p=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var t,r,s,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=6;break}s=(0,ge.iH)(ae.tO,"".concat(Ee(),".").concat(d.name)),(c=(0,ge.B0)(s,d)).on("state_changed",null,(function(e){console.error(e)}),(function(){(0,ge.Jt)(c.snapshot.ref).then(function(){var e=(0,i.Z)((0,o.Z)().mark((function e(t){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,re.r7)((0,re.JU)(ae.db,"chats",v),{messages:(0,re.vr)({id:Ee(),text:n,senderId:m.uid,date:re.EK.now(),img:t})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("err when upload image",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}())})),e.next=8;break;case 6:return e.next=8,(0,re.r7)((0,re.JU)(ae.db,"chats",v),{messages:(0,re.vr)({id:Ee(),text:n,senderId:m.uid,date:re.EK.now()})});case 8:return e.next=10,(0,re.r7)((0,re.JU)(ae.db,"userChats",m.uid),(t={},(0,l.Z)(t,v+".lastestMessage",{text:n}),(0,l.Z)(t,v+".date",(0,re.Bt)()),t));case 10:return e.next=12,(0,re.r7)((0,re.JU)(ae.db,"userChats",null===h||void 0===h?void 0:h.uid),(r={},(0,l.Z)(r,v+".lastestMessage",{text:n}),(0,l.Z)(r,v+".date",(0,re.Bt)()),r));case 12:a(""),f(null);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,se.jsxs)("div",{children:[(0,se.jsx)("div",{className:"file-upload-container",children:(0,se.jsx)("p",{children:null===d||void 0===d?void 0:d.name})}),(0,se.jsxs)("form",{className:"input-message-container",onSubmit:function(e){e.preventDefault(),p()},children:[(0,se.jsxs)("div",{className:"input-message-feild",children:[(0,se.jsx)(K.Z.TextArea,{placeholder:"Wrire something here!",name:"message",id:"message",autoSize:{minRows:1,maxRows:3},value:n,onChange:function(e){return a(e.target.value)}}),(0,se.jsx)(A.Z,{title:"Upload file",color:"blue",children:(0,se.jsx)("label",{className:"add-image-btn",htmlFor:"fileUpLoad",children:(0,se.jsx)(me,{})})})]}),((null===n||void 0===n?void 0:n.trim().length)>0||null!==d)&&(0,se.jsx)("button",{className:"send-btn btn",type:"submit",children:(0,se.jsx)(xe,{})})]}),(0,se.jsx)("input",{type:"file",id:"fileUpLoad",onChange:function(e){return f(e.target.files[0])},style:{display:"none"}})]})},Oe=n(1730),ke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560zm176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"video-camera",theme:"outlined"},Ue=function(e,t){return r.createElement(X.Z,(0,Y.Z)((0,Y.Z)({},e),{},{ref:t,icon:ke}))};Ue.displayName="VideoCameraOutlined";var Se=r.forwardRef(Ue),Re=function(){var e=(0,te.v9)((function(e){return e.Auth.chooseContactUser}));return(0,se.jsxs)("div",{className:"head-chat-container",children:[(0,se.jsx)("h2",{children:null===e||void 0===e?void 0:e.displayName}),(0,se.jsxs)("div",{className:"chat-toolkit-container",children:[(0,se.jsx)("button",{className:"kit-btn",style:{marginRight:"0.8rem"},children:(0,se.jsx)(A.Z,{title:"find message",color:"blue",children:(0,se.jsx)(Oe.Z,{})})}),(0,se.jsx)("button",{className:"kit-btn",children:(0,se.jsx)(A.Z,{title:"video call",color:"blue",children:(0,se.jsx)(Se,{})})})]})]})},Ie=function(){return(0,se.jsx)("div",{className:"template-container",children:(0,se.jsx)("h1",{children:"Welcome to chat app!"})})},ze=function(){var e=(0,te.v9)((function(e){return e.Auth.isChooseContact}));return(0,se.jsx)(se.Fragment,{children:(0,se.jsx)("div",{className:"body-chat-wrapper",children:(0,se.jsxs)(a,{className:"body-main",children:[(0,se.jsxs)(s,{lg:10,sm:16,xs:24,className:"sidebar-chat",children:[(0,se.jsx)(ce,{}),(0,se.jsx)(oe,{}),(0,se.jsx)(ie,{})]}),(0,se.jsx)(s,{lg:14,sm:8,xs:0,className:"message-container",children:e?(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(Re,{}),(0,se.jsx)(ue,{}),(0,se.jsx)(we,{})]}):(0,se.jsx)(Ie,{})})]})})})}},9529:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(1413),a=n(2791),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},c=n(4291),o=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:s}))};o.displayName="UserOutlined";var i=a.forwardRef(o)},9581:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(9439),a=n(2791);function s(){var e=a.useReducer((function(e){return e+1}),0);return(0,r.Z)(e,2)[1]}}}]);
//# sourceMappingURL=375.14340bd5.chunk.js.map